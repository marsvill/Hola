const PreventDuplicateScript_64=0;let HaveFetchedGroupShouts=!1,GroupShouts={};const GroupShoutNotifications={};async function GetGroupShouts(){if(HaveFetchedGroupShouts)return!0;const t=await LocalStorage.get("GroupShouts");return t&&(GroupShouts=JSON.parse(t)),HaveFetchedGroupShouts=!0,!0}function SaveGroupShouts(){LocalStorage.set("GroupShouts",JSON.stringify(GroupShouts))}function ClearOldGroupShouts(t){const o={};for(let e=0;e<t.length;e++)o[t[e]]=!0;const i=Object.keys(GroupShouts);for(let e=0;e<i.length;e++){const r=i[e];o[r]||delete GroupShouts[r]}}async function CreateGroupShoutNotification(t){chrome.notifications?.create&&chrome.notifications.create(null,{type:"basic",priority:0,eventTime:new Date(t.shout.updated).getTime(),iconUrl:await GetHeadshotBlobFromURL(`https://thumbnails.roblox.com/v1/groups/icons?groupIds=${t.id}&size=150x150&format=Png&isCircular=false`),title:`Group shout from ${t.name}`,message:t.shout.body,contextMessage:`By ${t.shout.poster.username}`},function(o){GroupShoutNotifications[o]=t.id})}chrome.notifications?.onClicked&&chrome.notifications.onClicked.addListener(function(t){const o=GroupShoutNotifications[t];o&&chrome.tabs.create({url:`https://www.roblox.com/groups/${o}/group#!/about`})});async function CheckForNewGroupShoutNotification(t){if(!await GetGroupShouts())return;const o=t.shout,i=GroupShouts[t.id];if(!o)return;const e=Math.floor(new Date(o.updated).getTime()/1e3);o&&i!==e&&(GroupShouts[t.id]=e,SaveGroupShouts(),i&&CreateGroupShoutNotification(t))}async function CheckForNewGroupShouts(){const t=await IsFeatureEnabled("GroupShoutNotifications"),o=t.Groups;if(ClearOldGroupShouts(o),!await GetCurrentUserId()){setTimeout(CheckForNewGroupShouts,60*1e3);return}if(!t.Enabled||o.length===0||!await GetGroupShouts()){setTimeout(CheckForNewGroupShouts,60*1e3);return}for(let e=0;e<o.length;e++){const[r,n]=await RequestFunc(`https://groups.roblox.com/v1/groups/${o[e]}`);r&&CheckForNewGroupShoutNotification(n),await sleep(5e3)}setTimeout(CheckForNewGroupShouts,60*1e3)}CheckForNewGroupShouts();

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/backgroundscripts/GroupShoutNotifications.js