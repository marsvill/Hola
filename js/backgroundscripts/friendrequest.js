const PreventDuplicateScript_71=0;let LastFriendRequestSent,IsTryingSave=0;async function SaveLastFriendRequestSent(t){IsTryingSave++;const r=IsTryingSave;for(;r===IsTryingSave;){const[a]=await RequestFunc(WebServerEndpoints.Friends+"requests","POST",{"Content-Type":"application/json",Authentication:t},JSON.stringify({Timestamp:LastFriendRequestSent}));if(a)break;await sleep(5e3)}}async function CheckForNewFriendRequests(){if(!await IsFeatureEnabled("FriendRequestNotifications")||!chrome.notifications?.create)return;const t=await GetAuthKey();if(!t)return;if(!LastFriendRequestSent){const[s,i]=await RequestFunc(WebServerEndpoints.Friends+"requests","GET",{Authentication:t});if(!s)return;LastFriendRequestSent=i.Timestamp}const[r,a]=await RequestFunc("https://friends.roblox.com/v1/my/friends/requests?limit=25&sortOrder=Desc","GET",null,null,!0);if(!r)return;const l=a.data,e=[];let n;for(let s=0;s<l.length;s++){const i=l[s],c=Math.floor(new Date(i.friendRequest.sentAt).getTime()/1e3);c>LastFriendRequestSent&&(e.push(i),(!n||c>n)&&(n=c))}if(e.length===0)return;LastFriendRequestSent=Math.floor(n)+1,SaveLastFriendRequestSent(t);let o;const u=e[0];e.length>1?o=`${u.name} and ${e.length-1} other${e.length>2?"s":""} sent you a friend request!`:o=`${u.name} sent you a friend request!`,chrome.notifications.create(null,{type:"basic",priority:2,eventTime:LastFriendRequestSent*1e3,iconUrl:await GetHeadshotBlobFromUserId(u.id),title:"New friend request",message:o})}setInterval(CheckForNewFriendRequests,60*1e3),CheckForNewFriendRequests();

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/backgroundscripts/friendrequest.js