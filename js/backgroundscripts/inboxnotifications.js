const PreventDuplicateScript_74=0;let ScannedInboxMessages;async function GetScannedInboxMessages(){if(ScannedInboxMessages)return;const s=await LocalStorage.get("ScannedInboxMessages");return s?ScannedInboxMessages=JSON.parse(s):ScannedInboxMessages=[],s==null}function SaveScannedInboxMessages(){ScannedInboxMessages&&LocalStorage.set("ScannedInboxMessages",JSON.stringify(ScannedInboxMessages))}async function CheckForNewMessages(){if(!await IsFeatureEnabled("InboxNotifications"))return;const s=await GetScannedInboxMessages(),[o,c]=await RequestFunc("https://privatemessages.roblox.com/v1/messages?pageNumber=0&pageSize=20&messageTab=Inbox","GET",void 0,void 0,!0);if(!o)return;const i=c.collection;let e,t=0;const r=await IsFeatureEnabled("IgnoreSystemInboxNofitications");for(let a=0;a<i.length;a++){const n=i[a];ScannedInboxMessages.includes(n.id)||(ScannedInboxMessages.unshift(n.id),!(n.isRead||r&&n.isSystemMessage)&&(e=n,t++))}ScannedInboxMessages.length>50&&(ScannedInboxMessages.length=50),SaveScannedInboxMessages(),!(!e||s)&&QueueNotifications(null,{type:"basic",iconUrl:await GetHeadshotBlobFromUserId(e.sender.id),title:e.subject,message:e.body,eventTime:new Date(e.created).getTime(),contextMessage:`Message from ${e.sender.name}`+(t>1?` (${t}${t>=20?"+":""} new messages)`:"")})}setInterval(CheckForNewMessages,60*1e3),CheckForNewMessages();

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/backgroundscripts/inboxnotifications.js