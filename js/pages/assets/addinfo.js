const PreventDuplicateScript_98=0;function RemoveBTRCreation(s,n){const o=s.children;for(let e=0;e<o.length;e++){const t=o[e];if(t.children.length!==0&&t.children[0].innerText===n){t.remove();break}}}function GetType(){return window.location.href.includes("/game-pass/")&&"Gamepass"||window.location.href.includes("/library/")&&"Library"||window.location.href.includes("/bundles/")&&"Bundle"||"Catalog"}function GetGamepassIdFromURL(){return parseInt(window.location.href.split("game-pass/")[1].split("/")[0])}function GetAssetInfo(s,n){return n=="Catalog"||n=="Library"?RequestFunc(`https://economy.roblox.com/v2/assets/${s}/details`,"GET",void 0,void 0,!0):n=="Bundle"?RequestFunc(`https://catalog.roblox.com/v1/bundles/${s}/details`,"GET",void 0,void 0,!0):RequestFunc(`https://apis.roblox.com/game-passes/v1/game-passes/${s}/details`,"GET",void 0,void 0,!0)}async function GetItemDates(s,n){if(n=="Bundle"){let t=0;for(let l=0;l<s.items.length;l++){const d=s.items[l];d.type=="Asset"&&d.id>t&&(t=d.id)}if(console.log(t),t==0)return[];const[i,a]=await RequestFunc(`https://economy.roblox.com/v2/assets/${t}/details`,"GET",void 0,void 0,!0);if(!i)return[];const r=new Date(a.Created),c=new Date(a.Updated);return[r,c]}const o=new Date(n=="Gamepass"&&s.createdTimestamp||s.Created),e=new Date(n=="Gamepass"&&s.updatedTimestamp||s.Updated);return[o,e]}async function CanUserSeeSales(s,n,o){if(n=="Catalog"||n=="Library"){const[e,t]=await RequestFunc("https://apis.roblox.com/asset-permissions-api/v1/assets/check-permissions","POST",{"Content-Type":"application/json"},JSON.stringify({requests:[{subject:{subjectType:"User",subjectId:(await GetUserId()).toString()},action:"Edit",assetId:s}]}),!0);return e&&t?.results?.[0]?.value?.status==="HasPermission"}else{const[e,t]=await RequestFunc(`https://games.roblox.com/v1/games/multiget-place-details?placeIds=${o.placeId}`,"GET",void 0,void 0,!0);if(!e)return!1;const[i,a]=await RequestFunc(`https://develop.roblox.com/v1/universes/multiget/permissions?ids=${t[0].universeId}`,"GET",void 0,void 0,!0),r=a.data[0];return i&&r.canManage&&r.canCloudEdit}}async function GetCreatorOfGroupItem(s){const[n,o]=await RequestFuncCORSBypass(`https://assetdelivery.roblox.com/v1/asset?id=${s.AssetId}`,"GET",void 0,void 0,!0,!0);if(!n)return;let e=o.split("rbxassetid://")[1];if(e||(e=o.split("id=")[1]),!e)return;let t="";for(let r=0;r<e.length;r++){const c=e.charAt(r);if(isNumeric(c))t+=c;else break}const[i,a]=await GetAssetInfo(t,"Catalog");if(i)return[`(${a.Creator.CreatorType=="User"&&"@"||""}${a.Creator.Name})`,a.Creator.Id,a.Creator.CreatorType]}async function AddAssetInfo(){const s=await IsFeatureEnabled("AddSales"),n=await IsFeatureEnabled("AddCreationDate");if(!s&&!n)return;let o;const e=GetType();e=="Catalog"||e=="Library"||e=="Bundle"?o=GetAssetIdFromURL():o=GetGamepassIdFromURL();const[t,i]=await GetAssetInfo(o,e);if(!t)return;const a=await Promise.race([WaitForClass("item-details-section"),WaitForId("item-details")]);if(RemoveBTRCreation(a,"Created"),RemoveBTRCreation(a,"Sales"),RemoveBTRCreation(a,"Updated"),n){const r=getNavigatorLanguages()[0],[c,l]=await GetItemDates(i,e);if(c){const d=CreateAssetItemFieldContainer("Created",c.toLocaleDateString(r,{month:"short",day:"2-digit",year:"numeric"}));(e=="Gamepass"||e=="Library")&&(d.className="clearfix item-field-container"),a.insertBefore(d,a.children[(e=="Gamepass"||e=="Library")&&3||2])}if(l){const d=CreateAssetItemFieldContainer("Updated",l.toLocaleDateString(r,{month:"short",day:"2-digit",year:"numeric"}));(e=="Gamepass"||e=="Library")&&(d.className="clearfix item-field-container"),a.insertBefore(d,a.children[(e=="Gamepass"||e=="Library")&&3||2])}(e=="Catalog"||e=="Bundle")&&(i.Creator?.CreatorType=="Group"||i.creator?.type=="Group")&&GetCreatorOfGroupItem(i).then(function([d,f,m]){if(!d)return;const u=document.createElement("a");u.className="text-name",u.style="margin-left: 8px;",u.innerText=d,u.href=`https://www.roblox.com/${m=="User"&&"users"||"groups"}/${f}`+(m=="User"?"/profile":""),CreatedField.children[1].appendChild(u)})}s&&CanUserSeeSales(o,e,i).then(function(r){if(r){const c=CreateAssetItemFieldContainer("Sales",numberWithCommas(e=="Gamepass"&&i.gamePassSalesData.totalSales||i.Sales));(e=="Gamepass"||e=="Library")&&(c.className="clearfix item-field-container");const l=(e=="Gamepass"||e=="Library")&&3||n&&2||1;a.insertBefore(c,a.children[l])}})}setTimeout(function(){IsFeatureEnabled("ShowUSDOnAsset").then(async function(s){if(!s)return;const n=await Promise.race([WaitForClass("item-details-section"),WaitForId("item-details")]);ChildAdded(n,!0,async function(o){const e=o.getElementsByClassName("text-robux-lg");for(let t=0;t<e.length;t++){const i=e[t];async function a(){const c=parseInt(i.textContent.replace(/\D/g,""));isNaN(c)||(r.innerText=`(${await RobuxToCurrency(c)})`)}const r=document.createElement("span");r.className="text-label",r.style="margin-left: 5px; font-weight: 500;",new MutationObserver(a).observe(i,{subtree:!0,characterData:!0}),a(),i.appendChild(r)}})}),AddAssetInfo()},0);

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/assets/addinfo.js