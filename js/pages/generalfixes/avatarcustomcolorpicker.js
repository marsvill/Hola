const PreventDuplicateScript_153=0;IsFeatureEnabled("AvatarCustomColorPicker").then(function(y){if(!y)return;function p(){for(const t of document.getElementsByClassName("bodycolors-radio-list")[0]?.getElementsByTagName("input")||[])if(t.checked)return t.id.split("-")[1].replace("Id","3")}function d(t,e){if(e||(e=p()),t.classList.remove("multiple"),e==="all"){let s=!0,o;for([_,v]of Object.entries(a)){if(o&&o!==v){s=!1;break}o=v}s?t.value="#"+o:(t.value="#FFFFFF",t.classList.contains("multiple")||t.classList.add("multiple"))}else t.value="#"+a[e]}function c(){l[0]&&d(l[0],"all"),l[1]&&d(l[1])}const a={},l=[];RequestFunc("https://avatar.roblox.com/v2/avatar/avatar","GET",void 0,void 0,!0).then(function([t,e]){if(t){for([k,v]of Object.entries(e.bodyColor3s))a[k]=v.replace("#","");c()}});function C(t,e){const s=document.createElement("div");s.className="roqol-custom-color-picker",s.innerHTML=`<div class="rbx-divider"></div>
        <div style="display: flex; flex-direction: column; align-items: center;">
            <p>Choose a custom color</p>
            <input type="color"></div>
        </div>`;const o=s.getElementsByTagName("input")[0];let i,r=!1;if(o.addEventListener("input",function(){o.classList.contains("multiple")&&o.classList.remove("multiple"),r=!0}),o.addEventListener("blur",async function(){if(!r)return;r=!1;const n=o.value.substring(1);if(i===n)return;i=n;let f=e==="all"?"all":p();if(f)if(f==="all"){const[m]=await RequestFunc("https://avatar.roblox.com/v2/avatar/set-body-colors","POST",{"Content-Type":"application/json"},JSON.stringify({headColor3:n,torsoColor3:n,rightArmColor3:n,leftArmColor3:n,rightLegColor3:n,leftLegColor3:n}),!0);if(m){for([k]of Object.entries(a))a[k]=n;c(),AlertControllerOfAvatarChange(),document.dispatchEvent(new CustomEvent("RefreshThumbnail"))}}else{const[m,g]=await RequestFunc("https://avatar.roblox.com/v2/avatar/avatar","GET",void 0,void 0,!0);if(m){const h=g.bodyColor3s;h[f]=n,a[f]=n,c();const[E]=await RequestFunc("https://avatar.roblox.com/v2/avatar/set-body-colors","POST",{"Content-Type":"application/json"},JSON.stringify(h),!0);E&&(AlertControllerOfAvatarChange(),document.dispatchEvent(new CustomEvent("RefreshThumbnail")))}}}),e)for(const n of document.getElementsByClassName("bodycolors-radio-list")[0]?.getElementsByTagName("input")||[])n.addEventListener("change",function(){n.checked&&d(o)});l.length>=2&&l.pop(),e?l.push(o):l.unshift(o),t.appendChild(s),d(o,"all")}const b={};RequestFunc("https://avatar.roblox.com/v1/avatar-rules","GET",void 0,void 0,!0).then(function([t,e]){if(t)for(const s of e.bodyColorsPalette)b[s.brickColorId]=s.hexColor.substring(1)});let u;document.addEventListener("RoQoL.AvatarUpdated",function(t){const[e,s]=JSON.parse(t.detail);if(u){let o=!0;for(const[i,r]of Object.entries(e.bodyColors))if(console.log(u[i],r),u[i]!==r){o=!1;break}if(o)return}if(u=e.bodyColors,!(e?.fromRoQoL||s)){for(const[o,i]of Object.entries(e.bodyColors)){const r=b[i];r&&(a[o.replace("Id","3")]=r)}c()}}),document.addEventListener("RoQoL.ColorUpdated",function(t){const e=JSON.parse(t.detail);if(e[1]&&e[1].name!="all")a[e[1].name.replace("Id","3")]=e[0].hexColor.substring(1);else for([k]of Object.entries(a))a[k]=e[0].hexColor.substring(1);c()}),WaitForClass("bodycolors-list").then(function(t){C(t,"all")}),WaitForTag("body").then(function(t){ChildAdded(t,!0,async function(){const e=document.getElementById("advanced-body-colors");e&&!e.getElementsByClassName("roqol-custom-color-picker")[0]&&C(e.getElementsByClassName("bodycolors-list-sm")[0],"advanced")})})});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/generalfixes/avatarcustomcolorpicker.js