const PreventDuplicateScript_216=0;let PlaytimeBatchRequests=[];function RequestPlaytimeBatchFetch(i,a){return new Promise(async(n,l)=>{if(PlaytimeBatchRequests.push({resolve:n,Type:i}),a!==!1&&PlaytimeBatchRequests.length>=2){const[t,C]=await RequestFunc(`${WebServerEndpoints.Playtime}all?time=all&type=Play,Edit&show=Some&count=${GetMaxTilesPerRow()}`,"GET");if(t)for(let e=0;e<PlaytimeBatchRequests.length;e++){const p=PlaytimeBatchRequests[e];p.resolve([t,C[p.Type]])}else for(let e=0;e<PlaytimeBatchRequests.length;e++)PlaytimeBatchRequests[e].resolve([t,C])}})}async function CreateHomeRow(i,a,n,l){const[t,C]=CreateContainerHeader(a,`https://www.roblox.com/charts#/sortName?sort=Playtime&type=${n}`);l||(t.style="display: none;");const e=CreateGameCarousel(),[p,T]=await SearchForRow(i,100000003);i.insertBefore(e,T.nextSibling),i.insertBefore(t,e);const[E,R,S,v]=CreateDropdownList("All Time");t.appendChild(E);let m=[0],P=!0;async function w(r){m[0]++;const d=m[0];for(;e.firstChild;)e.removeChild(e.lastChild);const u=CreateSpinner();e.appendChild(u);let c,s,f;if(P?(P=!1,[c,s,f]=await RequestPlaytimeBatchFetch(n)):[c,s,f]=await RequestFunc(`${WebServerEndpoints.Playtime}all?${r}&type=${n}&show=Some&count=${GetMaxTilesPerRow()}`,"GET"),r==="time=all"&&!l&&s.length===0){t.remove(),e.remove();return}else t.style="";if(m[0]!==d)return;function F(y){const h=document.createElement("p");h.innerText=y,e.appendChild(h),u.remove()}if(!c){F(`Failed to load playtime (${f?.status||""} ${f?.statusText||"HTTP Failed"}. ${s?.Result||""})`);return}s.sort(function(y,h){return h.Playtime-y.Playtime}),CreateGameCardsFromUniverseIds(s,e,d,m,F,u)}function o(r,d){const[u,c]=CreateDropdownButton(r);R.appendChild(u),c.addEventListener("click",function(){S.innerText=r,w(d),v()})}o("Past Day","time=1"),o("Past Week","time=7"),o("Past Month","time=30"),o("Past Year","time=365"),o("All Time","time=all"),w("time=all")}IsFeatureEnabled("Playtime").then(function(i){i&&setTimeout(async function(){let a=await WaitForClass("game-home-page-container");await IsFeatureEnabled("TemporaryHomePageContainerFix")&&(a=(await WaitForClassPath(a,"game-carousel")).parentNode);const[n,l]=await Promise.all([IsFeatureEnabled("HidePlayTime"),IsFeatureEnabled("HideEditTime")]);l?RequestPlaytimeBatchFetch("Edit",!1):CreateHomeRow(a,"Studio Sessions","Edit",!1),n?RequestPlaytimeBatchFetch("Play",!1):CreateHomeRow(a,"Playtime","Play",!1)},0)});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/playtime/home.js