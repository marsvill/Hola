const PreventDuplicateScript_215=0;let CurrentHeatmap,IsHeatmapVisible=!0,HeatmapVisibleInt=0;async function UpdateVisibility(){CurrentHeatmap.classList.toggle("open",IsHeatmapVisible),CurrentHeatmap.classList.toggle("close",!IsHeatmapVisible),HeatmapVisibleInt++;const c=HeatmapVisibleInt;IsHeatmapVisible||await sleep(500),c==HeatmapVisibleInt&&(CurrentHeatmap.style.display=IsHeatmapVisible?"":"none")}function CreateHeatmap(c){if(CurrentHeatmap){IsHeatmapVisible=!IsHeatmapVisible,UpdateVisibility();return}const t=document.createElement("div");t.id="heatmap-playtime-calendar",t.className="close",t.innerHTML=`<button type="button" class="close top-right-close-button" data-dismiss="modal" style="float: left; opacity: 1;">
    <span aria-hidden="true"><span class="icon-close"></span></span>
</button><div class="container" id="heatmap-playtime-calendar-inner"></div>`;const p=t.getElementsByClassName("container")[0];t.getElementsByClassName("close")[0].addEventListener("click",function(){IsHeatmapVisible=!1,UpdateVisibility()}),CurrentHeatmap=t;function y(d){const s=document.createElement("p");s.innerText=d,p.appendChild(s)}async function f(){const[d,s]=await RequestFunc(WebServerEndpoints.Playtime+"heatmap?universeId="+await GetUniverseIdFromGamePage(),"GET");if(!d){IsHeatmapVisible=!1,UpdateVisibility(),y(s.Result);return}const u=s.Sessions,o={};function m(e){return`${e.getDate()}-${e.getMonth()}-${e.getFullYear()}`}for(let e=0;e<u.length;e++){const n=u[e],a=new Date(n.Start*1e3),i=m(a);if(o[i]||(o[i]=[]),!n.End&&!n.LastUpdate){o[i].push({name:"Some data missing from 4-20th",date:a,value:1});continue}o[i].push({name:a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),date:a,value:(n.End||n.LastUpdate)-n.Start})}var v=moment().endOf("day").toDate(),h=moment().startOf("day").subtract(10,"year").toDate(),g=d3.timeDays(h,v).map(function(e,n){const a=o[m(e)]||[];return{date:e,details:a,init:function(){return this.total=this.details.reduce(function(i,S){return i+S.value},0),this}}.init()}),b="heatmap-playtime-calendar-inner",C="#cd2327",E="year",w=function(e){};calendarHeatmap.init(g,b,C,E,w),UpdateVisibility();const l=t.getElementsByClassName("heatmap-tooltip")[0];l.style.position="absolute",l.style["z-index"]="101",l.style["pointer-events"]="none",document.body.appendChild(l),t.style.maxWidth="1450px",r()}f();function r(){t.style.top=c.getBoundingClientRect().top+"px"}return window.addEventListener("resize",function(){r(),window.requestAnimationFrame(r)}),r(),t}

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/playtime/heatmap.js