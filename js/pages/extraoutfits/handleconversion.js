const PreventDuplicateScript_136=0;async function ConvertOutfitToExtra(e,n){const[t,a]=await RequestFunc(`https://avatar.roblox.com/v1/outfits/${e}/details`,"GET",void 0,void 0,!0);if(!t)return CreateAlert("Failed to convert outfit!",!1),[!1,a,!1];const s={scales:a.scale,bodyColors:a.bodyColors,playerAvatarType:a.playerAvatarType,assets:a.assets,emotes:[],defaultShirtApplied:!1,defaultPantsApplied:!1},[o,l]=await RequestFunc(WebServerEndpoints.Outfits+"save","POST",{"Content-Type":"application/json"},JSON.stringify({Name:a.name,Outfit:s,Image:n||"https://tr.rbxcdn.com/53eb9b17fe1432a809c73a13889b5006/420/420/Image/Png"}));let r=!1;if(o){const[i]=await RequestFunc(`https://avatar.roblox.com/v1/outfits/${e}/delete`,"POST",void 0,void 0,!0);r=i,r||CreateAlert("Failed to delete old outfit!",!1)}else return CreateAlert("Failed to convert outfit!",!1),[!1,l,!1];return[o,l,r]}async function ConvertNoIdOutfitToExtra(e){const n={scales:Outfit.scale,bodyColors:Outfit.bodyColors,playerAvatarType:Outfit.playerAvatarType,assets:Outfit.assets,emotes:[],defaultShirtApplied:!1,defaultPantsApplied:!1},[t,a]=await RequestFunc(WebSerWebServerEndpoints.OutfitsverURL+"save","POST",{"Content-Type":"application/json"},JSON.stringify({Name:Outfit.name,Outfit:n,Image:Image||"https://tr.rbxcdn.com/53eb9b17fe1432a809c73a13889b5006/420/420/Image/Png"}));let s=!1;if(t){const[o]=await RequestFunc(`https://avatar.roblox.com/v1/outfits/${OutfitId}/delete`,"POST",void 0,void 0,!0);s=o,s||CreateAlert("Failed to delete old outfit!",!1)}else return CreateAlert("Failed to convert outfit!",!1),[!1,a,!1];return[t,a,s]}async function ConvertExtraToOutfit(e){const[n,t]=await GetExtraOutfit(e);if(!n)return CreateAlert(t.Result,!1),[!1,t,!1];const a=CurrentExtraOutfitsInfo[e].Name,s={name:a,bodyColors:t.bodyColors,assetIds:t.assets,scale:t.scales,playerAvatarType:t.rigType,outfitType:0},[o,l]=await RequestFunc("https://avatar.roblox.com/v1/outfits/create","POST",void 0,JSON.stringify(s),!0);if(!o)return CreateAlert(l.Result,!1),[!1,l,!1];const[r,i]=await RequestFunc(WebServerEndpoints.Outfits+"delete/"+e,"DELETE");return r||CreateAlert(i.Result,!1),[o,l,r,a,s]}async function NewOutfitElementAdded(e){await sleep(1e3);const n=GetOutfitTypeFromElement(e);if(n!=="Roblox")return;const t=e.getElementsByTagName("div")[0].getElementsByClassName("item-card-container remove-panel outfit-card")[0].getElementsByClassName("item-card-caption")[0].getElementsByClassName("item-card-menu ng-scope ng-isolate-scope")[0],a=CreateItemCardMenuButton("Convert");a.addEventListener("click",async function(){[ModalWindow,Backdrop,CloseButton,CancelButton,FinalConvertButton,Input]=CreateOutfitModalWindow(`Convert Costume to ${n=="Extra"&&"Roblox"||"Extra"}`,`Your costume will be converted to ${n=="Extra"&&"a normal outfit."||"an extra outfit."}`,void 0,"Convert","Cancel"),CancelButton.addEventListener("click",function(){ModalWindow.remove(),Backdrop.remove()}),CloseButton.addEventListener("click",function(){ModalWindow.remove(),Backdrop.remove()}),FinalConvertButton.addEventListener("click",async function(){ModalWindow.remove(),Backdrop.remove();const s=GetOutfitTypeFromElement(e),[o,l]=await GetOutfitIdAndImageFromOutfitCard(e);if(s=="Roblox"){let r,i,u;e.getAttribute("no-id")?[r,i,u]=await ConvertNoIdOutfitToExtra(e):[r,i,u]=await ConvertOutfitToExtra(o,l),r&&(CreateAlert("Converted outfit to extra",!0),CreateExtraOutfitButton(i),CurrentExtraOutfitsInfo[i.Id]=i,u&&e.remove())}}),FinalConvertButton.setAttribute("enabled","enabled"),FinalConvertButton.removeAttribute("disabled")}),t.style["padding-top"]="10px",t.insertBefore(a,t.lastChild)}const NewOutfitElementObserver=new MutationObserver(function(e,n){e.forEach(function(t){if(t.type==="childList"){const a=t.addedNodes;for(let s=0;s<a.length;s++){const o=a[s];o.className==="list-item item-card ng-scope six-column"&&o.getAttribute("ng-class")==="{'five-column' : !avatarLibrary.metaData.isCategoryReorgEnabled, 'six-column' : avatarLibrary.metaData.isCategoryReorgEnabled}"&&NewOutfitElementAdded(o)}}})});async function StartConversion(){let e=CostumesList.getElementsByTagName("div")[1].getElementsByTagName("div")[0].getElementsByTagName("ul")[0];NewOutfitElementObserver.observe(e,{childList:!0})}

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/extraoutfits/handleconversion.js