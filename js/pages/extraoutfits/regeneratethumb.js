const PreventDuplicateScript_139=0;async function GenerateExtraOutfitThumbnail(e){const o={};for([k,v]of Object.entries(e.bodyColor3s))o[k.slice(0,-1)]=v;const n={thumbnailId:1,thumbnailType:"2d",size:"150x150"},s={assets:e.assets,bodyColors:o,scales:e.scales,playerAvatarType:{playerAvatarType:e.playerAvatarType}},l={thumbnailConfig:n,avatarDefinition:s};for(;;){const[i,r]=await RequestFunc("https://avatar.roblox.com/v1/avatar/render","POST",{"Content-Type":"application/json"},JSON.stringify(l),!0);if(!i)return[i,r];if(r.state==="Pending"){await sleep(2e3);continue}return[i,r?.imageUrl]}}let RegenerateThumbnailQueue=[],IsThumbnailQueueBeingRan=!1;async function RegenerateExtraOutfitThumbnail(e,o){const n={};for([k,v]of Object.entries(e.bodyColor3s))n[k.slice(0,-1)]=v;const s=[];for(let a=0;a<e.assets.length;a++)s.push({id:e.assets[a]});if(e.assetsMeta)for(let a=0;a<e.assetsMeta.length;a++){const t=e.assetsMeta[a];s.push({id:t.assetId,meta:{order:t.order,puffiness:t.puffiness||0,version:t.version}})}const l={thumbnailId:1,thumbnailType:"2d",size:"150x150"},i={assets:s,bodyColors:n,scales:e.scales,playerAvatarType:{playerAvatarType:e.rigType}},r={thumbnailConfig:l,avatarDefinition:i};for(;;){const[a,t]=await RequestFunc("https://avatar.roblox.com/v1/avatar/render","POST",{"Content-Type":"application/json"},JSON.stringify(r),!0);if(!a&&t.status!==429)return;if(t.state==="Pending"||t.status===429){if(t.status===429){await sleep(5e3);continue}await sleep(2e3);continue}return t.imageUrl&&t.state=="Completed"&&RequestFunc(WebServerEndpoints.Outfits+"image","PUT",{"Content-Type":"application/json"},JSON.stringify({Id:o,URL:t.imageUrl})),t.imageUrl}}function QueueRegenerateExtraOutfitThumbnail(e){return new Promise(async o=>{if(e&&RegenerateThumbnailQueue.push([e,o]),IsThumbnailQueueBeingRan)return;IsThumbnailQueueBeingRan=!0,await sleep(300);const n=RegenerateThumbnailQueue;RegenerateThumbnailQueue=[];for(let s=0;s<n.length;s++){const[l,i]=n[s],[r,a]=await GetExtraOutfit(l);r&&i(await RegenerateExtraOutfitThumbnail(a,l))}IsThumbnailQueueBeingRan=!1,RegenerateThumbnailQueue.length>0&&QueueRegenerateExtraOutfitThumbnail()})}

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/extraoutfits/regeneratethumb.js