const PreventDuplicateScript_232=0;let PendingServerRegions=[],PendingPrivateServerRegions=[];const CacheAccessCodeToRegion={};function AddPrivateServerRegion(o){return new Promise(async g=>{if(o.getAttribute("has-region")||o.getAttribute("jobid")==="null"||(PendingPrivateServerRegions.push({element:o,resolve:g}),o.setAttribute("has-region",!0),PendingPrivateServerRegions.length>1))return;await sleep(100),PendingPrivateServerRegions.length>10&&(PendingPrivateServerRegions.length=10);const i={},a=[];let l=0;const c={};let p=!1;for(let r=0;r<PendingPrivateServerRegions.length;r++){const e=PendingPrivateServerRegions[r],t=e.element,n=e.resolve;for(c[t]=n;!t.getAttribute("accesscode");)await sleep(100);const s=t.getAttribute("accesscode");i[s]||(i[s]=[]),l=parseInt(t.getAttribute("placeid")),CacheAccessCodeToRegion[s]&&i[s].push(t);const[u,f]=await RequestFunc("https://gamejoin.roblox.com/v1/join-private-game","POST",{"Content-Type":"application/json"},JSON.stringify({accessCode:s,placeId:l}),!0);i[s].push(t),u&&f.joinScript&&a.push({IP:f.joinScript.UdmuxEndpoints[0].Address||f.joinScript.MachineAddress,Version:f.RccVersion,AccessCode:s})}if(PendingPrivateServerRegions=[],a.length===0){for(const[r,e]of Object.entries(c))e();return}const[v,d]=await RequestFunc(WebServerEndpoints.Servers+"private","POST",{"Content-Type":"application/json"},JSON.stringify({PlaceId:l,IPs:a}));if(!v){for(const[r,e]of Object.entries(c))e();return}for(let r=0;r<d.length;r++){const e=d[r],t=i[e.AccessCode];if(t)for(let n=0;n<t.length;n++)c[t[n]](CreateServerInfo(t[n],e))}for(const[r,e]of Object.entries(c))e()})}function AddServerRegion(o){return o.parentNode?.id==="rbx-private-game-server-item-container"?AddPrivateServerRegion(o):new Promise(async g=>{if(o.getAttribute("has-region")||(PendingServerRegions.push({element:o,resolve:g}),o.setAttribute("has-region",!0),PendingServerRegions.length>1))return;await sleep(100);const i={},a=[];let l=0;const c={};for(let e=0;e<PendingServerRegions.length;e++){const t=PendingServerRegions[e],n=t.element,s=t.resolve;for(c[n]=s;!n.getAttribute("jobid");)await sleep(100);const u=n.getAttribute("jobid");i[u]||(i[u]=[]),i[u].push(n),a.push(u),l=parseInt(n.getAttribute("placeid"))}PendingServerRegions=[];const p=await PaidForFeature("ServerRegions"),v=p?WebServerEndpoints.Servers:WebServerEndpoints.Servers+"discover",[d,r]=await RequestFunc(v,"POST",{"Content-Type":"application/json"},JSON.stringify({PlaceId:l,JobIds:a}));if(!d||!p){for(const[e,t]of Object.entries(c))t();return}for(let e=0;e<r.length;e++){const t=r[e],n=i[t.JobId];if(n)for(let s=0;s<n.length;s++)c[n[s]](CreateServerInfo(n[s],t))}for(const[e,t]of Object.entries(c))t()})}

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/serverfilters/addserverregion.js