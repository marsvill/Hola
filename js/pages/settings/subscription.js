const PreventDuplicateScript_245=0;async function CreateSubscriptionSection(l){const e=document.createElement("div");e.style="display: flex; justify-content: center; margin-bottom: 16px; flex-direction: column;",e.innerHTML=`
    <div style="margin-top: 50px; margin-bottom: 50px; display: flex; flex-direction: column; align-items: center;"><input class="form-control input-field new-input-field" placeholder="Subscription key" maxlength="999" autocomplete="false" autocapitalize="false" spellcheck="false" style="width: 400px; float: right; height: 33px;"><p style="margin-top: 20px; display: none;" class="status"></p><div style="margin-top: 20px;"><button style="margin-right: 20px;" class="btn-control-md refresh-subscription-button">Refresh</button><button style="" class="btn-primary-md redeem-subscription-button">Redeem</button></div></div>
    <div><h3>Next payment</h3><p class="renewal">Renews on ...</p><h3>Tier</h3><p class="tier">...</p><h3>Price</h3><p style="margin-bottom: 25px;" class="price">$...</p> <a href="https://roqol.io/pages/account">Manage Account</a><br><br><a href="https://roqol.io/pages/pricing">Purchase subscription</a><br><br><a href="https://roqol.io/pages/faq#redeem">How to redeem</a></div>
    `;const o=e.getElementsByTagName("input")[0],n=e.getElementsByClassName("redeem-subscription-button")[0],i=e.getElementsByClassName("refresh-subscription-button")[0],t=e.getElementsByClassName("status")[0];async function r(){const[a,s]=await RequestFunc(WebServerEndpoints.User+"subscription/detailed","GET");a?(e.getElementsByClassName("renewal")[0].innerText=typeof s.Renewal=="number"?`Renews on ${new Date(s.Renewal).toLocaleDateString(void 0,{month:"long",day:"2-digit"})}`:s.Renewal,e.getElementsByClassName("tier")[0].innerText=`${s.Tier}`,e.getElementsByClassName("price")[0].innerText=`${s.Price}`):s?.Result==="Invalid Subscription Key"&&(e.getElementsByClassName("renewal")[0].innerText="Not subscribed",e.getElementsByClassName("tier")[0].innerText="Free",e.getElementsByClassName("price")[0].innerText="")}n.addEventListener("click",async function(){n.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled"),t.innerText="Redeeming",t.style.display="";const[a,s]=await RequestFunc(WebServerEndpoints.User+"subscription/redeem","POST",{"Content-Type":"application/json"},JSON.stringify({Key:o.value}));a?(t.innerText="Updating subscription status",CurrentSubscription=await chrome.runtime.sendMessage({type:"RefreshSubscription"}),t.innerText="Redeemed",o.value="",r()):t.innerText=`Failed to redeem key (${s.Result})`,n.removeAttribute("disabled"),i.removeAttribute("disabled")}),i.addEventListener("click",async function(){n.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled"),t.innerText="Updating subscription status",t.style.display="",CurrentSubscription=await chrome.runtime.sendMessage({type:"RefreshSubscription"}),r(),t.innerText="Refreshed",n.removeAttribute("disabled"),i.removeAttribute("disabled")}),chrome.runtime.sendMessage({type:"RefreshSubscription"}).then(r),r(),l.append(e)}

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/settings/subscription.js