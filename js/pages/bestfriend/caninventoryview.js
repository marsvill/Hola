const PreventDuplicateScript_111=0;IsFeatureEnabled("BestFriendInventoryV2").then(async function(v){if(!v||!await PaidForFeature("BestFriends"))return;let t,c,r,i;function o(){i&&i.remove(),i=void 0,c&&r&&t&&(i=document.createElement("button"),i.className="btn-primary-md",i.innerText="Give access for best friend inventory",i.addEventListener("click",function(){chrome.runtime.sendMessage({type:"OAuthNewTab"}),r=!1,o()}),c.appendChild(i))}async function y(){if(t!==void 0)return t;const[s,d]=await RequestFunc(WebServerEndpoints.BestFriends+"inventory/view","GET");s&&(t=d.CanView,r=d.OAuthRequired,o())}async function l(){let s=t;const[d,a]=await RequestFunc(WebServerEndpoints.BestFriends+"inventory/setview","POST",{"Content-Type":"application/json"},JSON.stringify({CanView:t}));s&&d&&a.OAuthRequired?(r=!0,o()):(r=!1,o())}ChildAdded(await WaitForClass("tab-content"),!0,function(s){if(!(document.getElementById("privacy-settings")||document.getElementById("rbx-privacy-settings-header")))return;let a=!1;DescendantAdded(s,!0,async function(m,h){if(a)return;a=!0,sleep(0),a=!1;const e=document.getElementById("InventoryPrivacy");if(!e||document.getElementById("best-friends-view-inventory"))return;h(),c=document.getElementById("InventoryPrivacyLabel").parentNode;const n=document.createElement("option");n.value="BestFriends",n.id="best-friends-view-inventory",n.innerText="Best Friends";function B(){const f=e.children;for(let u=0;u<f.length;u++)if(f[u]===n)return u}e.addEventListener("change",function(){e.selectedIndex===B()?(n.value="NoOne",n.innerText="Best Friends (13+ account required, Best Friends require RoQoL extension)",t||(t=!0,l())):(n.value="BestFriends",n.innerText="Best Friends",t&&(t=!1,l()))}),ChildRemoved(e,function(){n.parentNode||e.insertBefore(n,e.children[e.children.length-1])}),e.insertBefore(n,e.children[e.children.length-1]),await y(),t&&e.value==="NoOne"&&(n.innerText="Best Friends (13+ account required, Best Friends require RoQoL extension)",e.value="BestFriends")})})});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/bestfriend/caninventoryview.js