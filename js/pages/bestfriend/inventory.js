const PreventDuplicateScript_115=0;const BestFriendInventoryScript=document.currentScript;function FetchFromInventoryHelper(v){return new Promise(async g=>{function I(w){document.removeEventListener("RobloxQoL.GetBestFriendInventoryResponse",I),g(w?.detail)}for(document.addEventListener("RobloxQoL.GetBestFriendInventoryResponse",I);!BestFriendInventoryScript.getAttribute("inventoryhelper-ready");)await new Promise(w=>setTimeout(w,50));document.dispatchEvent(new CustomEvent("RobloxQoL.GetBestFriendInventory",{detail:v}))})}function IsFeatureEnabled(v){return new Promise(async g=>{function I(w){document.removeEventListener("RobloxQoL.IsFeatureEnabledResponse",I),g(w?.detail)}document.addEventListener("RobloxQoL.IsFeatureEnabledResponse",I),document.dispatchEvent(new CustomEvent("RobloxQoL.IsFeatureEnabled",{detail:v}))})}IsFeatureEnabled("BestFriendInventoryV2").then(async function(v){if(!v)return;let g=[],I;const w=document.createElement("p");function R(a,r){const e=[];for(let p=0;p<a.length;p+=r){const T=a.slice(p,p+r);e.push(T)}return e}async function b(a,r){let e,p,T="inventory";const P=new URLSearchParams(a.split("?")[1]);let E=P.get("cursor")?.replace("oauth_","")||"";const B=document.getElementsByClassName("tab-content-group")[0]?.getElementsByClassName("item-cards")?.[0]?.getElementsByClassName("section-content-off")?.[0];if(B&&B.appendChild(w),w.innerText="",a.substring(0,48)==="https://www.roblox.com/users/inventory/list-json")T="list-json",e=parseInt(P.get("assetTypeId")),p=await FetchFromInventoryHelper([parseInt(P.get("userId")),e,E]);else if(a.substring(0,38)==="https://inventory.roblox.com/v2/users/")e=a.split("/inventory/")[1].split("?")[0],p=await FetchFromInventoryHelper([parseInt(a.split("/users/")[1].split("/")[0]),e,E]);else{const i=parseInt(a.split("/bundles/")[1].split("?")[0]);i===1?e=1001:i===4&&(e=1002),p=await FetchFromInventoryHelper([parseInt(a.split("/users/")[1].split("/")[0]),e,E])}if(p&&p.ok){let i=p.json;e!==I&&(I=e,g=[]),i.nextPageCursor&&(i.nextPageCursor="oauth_"+i.nextPageCursor),i.previousPageCursor&&(i.previousPageCursor="oauth_"+i.previousPageCursor),i.nextPageCursor&&!g.includes(i.nextPageCursor)&&g.push(i.nextPageCursor);const C={};for(const f of r.headers||r.getAllResponseHeaders().trim().split(/[\r\n]+/))C[f[0]]=f[1];if(T==="inventory"){const f=parseInt(document.head.querySelector("[name~=user-data][data-userid]").getAttribute("data-userid")),x=new Date().toISOString(),y=i.data;if(e===1001){const c=[],m=[];for(let l=0;l<y.length;l++){const s=l;m.push(new Promise(async n=>{const o=await fetch(`https://www.roblox.com/game/getassetidsforpackageid?packageId=${y[l].assetId}`,{method:"GET",credentials:"include"});if(o.ok){const d=(await o.json())[0];if(d){const t=await fetch(`https://catalog.roblox.com/v1/assets/${d}/bundles?limit=10&sortOrder=Asc`,{method:"GET",credentials:"include"});if(t.ok){const u=(await t.json()).data[0];c[s]={creator:{Id:u.creator.id,Name:u.creator.name,Type:u.creator.type==="User"?1:2,HasVerifiedBadge:u.creator.hasVerifiedBadge,CreatorProfileLink:(u.creator.type==="User"?`https://www.roblox.com/users/${u.creator.id}/profile/`:`https://www.roblox.com/groups/${u.creator.id}/`)||""},id:u.id,bundleType:u.bundleType,name:u.name}}}}n()}))}await Promise.all(m),i.data=c}else if(e===1002){let n=function(){return fetch("https://catalog.roblox.com/v1/catalog/items/details",{method:"POST",body:JSON.stringify({items:m}),headers:{"Content-Type":"application/json","x-csrf-token":s},credentials:"include"})};var j=n;const c=[],m=[];for(let o=0;o<y.length;o++)m.push({id:y[o].assetId,itemType:1});let l,s="";if(l=await n(),!l.ok&&l.status===403&&(s=l.headers.get("x-csrf-token"),l=await n()),l.ok){const o=(await l.json()).data;for(let d=0;d<o.length;d++){const t=o[d];c.push({bundleType:"DynamicHead",id:t.id,name:t.name,creator:{id:t.creatorTargetId,hasVerifiedBadge:t.creatorHasVerifiedBadge,name:t.creatorName,type:t.creatorType}})}}i.data=c}else for(let c=0;c<y.length;c++){const m=y[c];m.created=x,m.updated=x,m.owner={userId:f,buildersClubMembershipType:0,username:"placeholder"},m.assetName=c.toString()}i.data.length===0&&(i.nextPageCursor=void 0)}else{let f=i;const x=[];i={Data:{Start:0,End:99,Page:1,PageType:"inventory",nextPageCursor:f.nextPageCursor!==""?f.nextPageCursor:void 0,previousPageCursor:g[g.length-2],Items:x},IsValid:!0};const y=f.data,c=[],m={};for(let l=0;l<y.length;l++){const s=y[l];c.push(s.assetId),m[s.assetId]=s}if(c.length>0){if(e===34||e===24||e===3||e===21||e===13||e===40||e===10||e===9||e===38||e===62){let l={};if(e===24||e===3||e===13||e===40||e===10||e===9||e===38||e===62){const s=R(c,50);for(let n=0;n<s.length;n++){const o=s[n],d=await fetch(`https://develop.roblox.com/v1/assets?assetIds=${o.join(",")}`,{method:"GET",credentials:"include"}),t=d?.ok&&(await d.json())?.data;if(t)for(let u=0;u<t.length;u++)l[t[u].id]=t[u]}}else if(e===21){const s=[];for(let n=0;n<c.length;n++)s.push(new Promise(async o=>{const d=await fetch(`https://badges.roblox.com/v1/badges/${c[n]}`,{method:"GET",credentials:"include"});if(d.ok){const t=await d.json();l[t.id]={name:t.displayName}}o()}));await Promise.all(s)}else if(e===34){const s=[];for(let n=0;n<c.length;n++)s.push(new Promise(async o=>{const d=await fetch(`https://apis.roblox.com/game-passes/v1/game-passes/${c[n]}/product-info`,{method:"GET",credentials:"include"});if(d.ok){const t=await d.json();l[c[n]]={name:t.Name,creator:{targetId:t.Creator.CreatorTargetId,name:t.Creator.Name,typeId:t.Creator.CreatorType==="User"?1:2},product:{PriceInRobux:t.PriceInRobux,IsForSale:t.IsForSale,IsFree:t.PriceInRobux===0}}}o()}));await Promise.all(s)}for(let s=0;s<c.length;s++){const n=c[s],o=l[n];let d;e===34?d=`https://www.roblox.com/game-pass/${n}/`:e===21?d=`https://www.roblox.com/badges/${n}/-`:d=`https://www.roblox.com/library/${n}/`,x.push({Creator:{Id:o?.creator?.targetId||1,Name:o?.creator?.name||"User",Type:o?.creator?.typeId||1,HasVerifiedBadge:!1,CreatorProfileLink:(o?.creator?.typeId===1?`https://www.roblox.com/users/${o?.creator?.targetId}/profile/`:`https://www.roblox.com/groups/${o?.creator?.targetId}/`)||""},Item:{AbsoluteUrl:d,AssetId:n,AssetType:f.AssetType,Name:o?.name||"Unknown"},Thumbnail:{Final:!0,IsApproved:!0,RetryUrl:"",Url:""},UserItem:{CanUserBuyItem:!1,IsItemOwned:!1,ItemOwnedCount:0},Product:o?.product})}}else{let o=function(){return fetch("https://catalog.roblox.com/v1/catalog/items/details",{method:"POST",body:JSON.stringify({items:l}),headers:{"Content-Type":"application/json","x-csrf-token":n},credentials:"include"})};var j=o;const l=[];for(let t=0;t<c.length;t++)l.push({id:c[t],itemType:1});let s,n="";if(s=await o(),!s.ok&&s.status===403&&(n=s.headers.get("x-csrf-token"),s=await o()),s.ok){const t=(await s.json()).data;for(let u=0;u<t.length;u++){const h=t[u];x.push({Creator:{Id:h.creatorTargetId||1,Name:h.creatorName||"Unknown",Type:h.creatorType||1,HasVerifiedBadge:h.creatorHasVerifiedBadge||!1,CreatorProfileLink:(h.creatorType===1?`https://www.roblox.com/users/${h.creatorTargetId}/profile/`:`https://www.roblox.com/groups/${h.creatorTargetId}/`)||""},Item:{AbsoluteUrl:`https://www.roblox.com/catalog/${h.id}/`,AssetId:h.id,AssetType:f.AssetType,Name:h.name},Thumbnail:{Final:!0,IsApproved:!0,RetryUrl:"",Url:""},UserItem:{CanUserBuyItem:!1,IsItemOwned:!1,ItemOwnedCount:0}})}}}i.Data.Items.length<99&&(i.Data.End=i.Data.Items.length),i.Data.Items.length===0&&(i.Data.nextPageCursor=void 0)}}const k=JSON.stringify(i);return C["content-length"]=k.length,C["content-type"]="application/json",[new Response(k,{status:200,statusText:"OK",headers:C}),k]}else!p||p.status===403||p.status===400?Roblox?.AssetsExplorerModel&&(Roblox.AssetsExplorerModel.canViewInventory=!1):p.status===500&&(w.innerText="Unable to fetch inventory: "+(p?.json?.Result||""))}InterceptXMLHttpRequest(function(a){return a.substring(0,38)==="https://inventory.roblox.com/v2/users/"||a.substring(0,48)==="https://www.roblox.com/users/inventory/list-json"||a.substring(0,36)=="https://catalog.roblox.com/v1/users/"&&a.includes("/bundles/")},async function(a,r){if(r.includes("cursor=oauth_")||a.status===403)return b(r,a);if(r.substring(0,48)==="https://www.roblox.com/users/inventory/list-json"&&JSON.parse(a.responseText)?.Data?.End===-1)return b(r,a)});const A=fetch.bind(globalThis);for(window.fetch=async function(...a){const r=await A(...a);if(r.url.substring(0,38)==="https://inventory.roblox.com/v2/users/"||r.url.substring(0,48)==="https://www.roblox.com/users/inventory/list-json"||r.url.substring(0,36)=="https://catalog.roblox.com/v1/users/"&&r.url.includes("/bundles/")){if(r.url.includes("cursor=oauth_"))return[b(r.url,r)];if(r.status===403)return[b(r.url,r)];if(r.url.substring(0,48)==="https://www.roblox.com/users/inventory/list-json"&&(await r.clone().json())?.Data?.End===-1)return[b(r.url,r)]}return r};!Roblox?.AssetsExplorerModel;)await new Promise(a=>setTimeout(a,0));Roblox.AssetsExplorerModel.canViewInventory=!0});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/bestfriend/inventory.js