const PreventDuplicateScript_201=0;async function GetValueLabelFromHeader(e,i){for(;;){const s=e.children;for(let a=0;a<s.length;a++){const o=s[a];if(o.className.search("game-stat")===-1)continue;const l=o.children[0];let t=o.children[1];if(l&&t){const r=t.children[0];if(r&&(t=r),l.innerText===i)return t}}await sleep(100)}}function GetAlphaTween(e,i,s){return e+s/1*(i-e)}function TweenLabel(e,i,s,a,o,l){return l&&i>s||i==s?new Promise(async t=>{await sleep(5*1e3),t()}):TweenNumber(i,s,a,function(t){const r=o&&o(t)||t;e.innerText=r,e.title=r})}function TweenNumber(e,i,s,a){const o=new Date().getTime();return new Promise(t=>{function r(){const u=clamp((new Date().getTime()-o)/(s*1e3),0,1);a(Math.floor(GetAlphaTween(e,i,u))),u<1?window.requestAnimationFrame(r):t()}window.requestAnimationFrame(r)})}async function RunLiveStats(){const e=await WaitForClass("border-top border-bottom game-stats-container follow-button-enabled"),i=await GetValueLabelFromHeader(e,"Active"),s=await GetValueLabelFromHeader(e,"Favorites"),a=await GetValueLabelFromHeader(e,"Visits");let o=0,l=0,t=0,r=!0;async function u(){const[c,n]=await GetLiveStatsFromCurrentPlace();c&&(r?(r=!1,i.innerText=numberWithCommas(n.Playing),s.innerText=numberWithCommas(n.Favourites),a.innerText=numberWithCommas(n.Visits),i.title=numberWithCommas(n.Playing),s.title=numberWithCommas(n.Favourites),a.title=numberWithCommas(n.Visits)):Promise.all([TweenLabel(i,o,n.Playing,5,numberWithCommas),TweenLabel(s,l,n.Favourites,5,numberWithCommas),TweenLabel(a,t,n.Visits,5,numberWithCommas,!0)]),o=n.Playing,l=n.Favourites,t<n.Visits&&(t=n.Visits)),setTimeout(u,5e3)}u()}async function RunLiveLikes(){const e=await WaitForClass("vote-details"),i=e.getElementsByClassName("vote-container")[0].getElementsByClassName("vote-percentage")[0],s=e.getElementsByClassName("vote-numbers")[0],a=s.getElementsByClassName("count-right")[0].getElementsByClassName("vote-text")[0],o=s.getElementsByClassName("count-left")[0].getElementsByClassName("vote-text")[0],l=await IsFeatureEnabled("ShowFullVoteCount");let t=0,r=0,u=0,c=!0;async function n(){const[b,m]=await GetLikesFromCurrentPlace();b&&(c?(c=!1,a.innerText=(l||m.Dislikes<1e4?numberWithCommas:AbbreviateNumber)(m.Dislikes),o.innerText=(l||m.Likes<1e4?numberWithCommas:AbbreviateNumber)(m.Likes),i.style=`width: ${m.Ratio}%;`):Promise.all([TweenLabel(a,r,m.Dislikes,5,l||m.Dislikes<1e4?numberWithCommas:AbbreviateNumber),TweenLabel(o,t,m.Likes,5,l||m.Likes<1e4?numberWithCommas:AbbreviateNumber),TweenNumber(u,m.Ratio,5,function(f){i.style=`width: ${f}%;`})]),t=m.Likes,r=m.Dislikes,u=m.Ratio),setTimeout(n,5e3)}n()}IsFeatureEnabled("LiveExperienceStats").then(function(e){e&&(RunLiveStats(),RunLiveLikes())});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/liveexperience/main.js