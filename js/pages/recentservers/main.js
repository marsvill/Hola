const PreventDuplicateScript_228=0;async function GetHeadshotsFromUserIds(a){const[l,I]=await RequestFunc(`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${a.join(",")}&size=150x150&format=Png&isCircular=true`,"GET",void 0,void 0,!0);if(!l)return[!1];const o={},s=I.data;for(let c=0;c<s.length;c++){const r=s[c];o[r.targetId]=r.imageUrl}return[!0,o]}async function CreateRecentServers(){const[a,l,I]=await CreateRecentServersList(),o=await WaitForId("rbx-friends-running-games");o.parentElement.insertBefore(a,o);const s=await GetPlaceIdFromGamePage(),c=await GetRecentServers(s),r={},n=[],f=[],u=[];let m=!1;for(const[t,e]of Object.entries(c))f.push(new Promise(async i=>{const[d,v]=await IsRobloxServerAlive(s,e.Id);if(d&&!v){chrome.runtime.sendMessage({type:"recentserverexpired",placeId:s,jobId:e.Id}),i();return}m=!0;const[S,y]=CreateRecentServerBox(s,e.Id,e.UserId,e.LastPlayed);u.push({Element:S,LastPlayed:e.LastPlayed}),r[e.UserId]||(r[e.UserId]=[]),r[e.UserId].push(y),n.includes(e.UserId)||n.push(e.UserId),i()}));if(await Promise.all(f),!m){l.style="display: none;",I.style="";return}u.sort(function(t,e){return e.LastPlayed-t.LastPlayed});for(let t=0;t<u.length;t++)l.appendChild(u[t].Element);if(n.length===0)return;const[h,g]=await GetHeadshotsFromUserIds(n);for(let t=0;t<n.length;t++){const e=n[t],i=r[e];for(let d=0;d<i.length;d++)i[d].src=h&&g[e]||"https://tr.rbxcdn.com/53eb9b17fe1432a809c73a13889b5006/150/150/Image/Png"}}IsFeatureEnabled("RecentServers").then(async function(a){a&&setTimeout(CreateRecentServers,0)});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/recentservers/main.js