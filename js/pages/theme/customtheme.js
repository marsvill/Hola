const PreventDuplicateScript_250=0;let CurrentIFrame;const DefaultIFrameStyle="width: 100%; border: 0; z-index: -2; top: 0; left: 0; user-select: none;",StyleFixes=[];async function GetSRCAuthenticated(t){const[e,o,n]=await RequestFunc(t,"GET",void 0,void 0,void 0,!0);if(!e)return;const i=await n.blob();return URL.createObjectURL(i)}function hexToRgb(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}async function PostCSSEdits(t,e){function o(){e.contentWindow.postMessage({css:{"background-repeat":t.BackgroundRepeat,"object-fit":t.VideoFit=="fixed"?"cover":t.VideoFit}},"*")}if(CurrentIFrame.getAttribute("loaded"))return o();window.addEventListener("message",function(n){n.source===e.contentWindow&&n.data.type==="theme-iframe-ready"&&(CurrentIFrame.setAttribute("loaded",!0),o())})}function UpdateThemeSettings(t){const e=t?.Settings;if(!e||!CurrentIFrame)return;const o=t.Type=="video";CurrentIFrame.style=`${DefaultIFrameStyle} position: ${o&&e.VideoFit=="fixed"?"fixed":"absolute"}; height: ${o&&e.VideoFit=="fixed"?"100vh":"100%"}; filter: blur(${e.Blur||0}px) brightness(${e.Brightness!==void 0?e.Brightness:1}) saturate(${e.Saturation!==void 0?e.Saturation:1});`,PostCSSEdits(e,CurrentIFrame),e.Opacity!==void 0&&e.Opacity<1?(document.body.className.includes("opacity-theme")||(document.body.className+=" opacity-theme"),WaitForClass("content").then(function(n){const i=window.getComputedStyle(n);if(i.backgroundColor.startsWith("rgb")){const s=new RegExp("[0-9]+","g"),a=[];for(;result=s.exec(i.backgroundColor);)a.push(result);if(a.length<3)return;n.style["background-color"]=`rgba(${a[0]},${a[1]},${a[2]},${e.Opacity})`}else if(i.backgroundColor.startsWith("#")){const s=hexToRgb(i.backgroundColor);n.style["background-color"]=`rgba(${s.r},${s.g},${s.b},${e.Opacity})`}})):document.body.className=document.body.className.replace(" opacity-theme","")}async function UpdateTheme(t){const e=window.location.href;if(!(!e.includes("web.roblox.com")&&!e.includes("www.roblox.com")))if(CurrentIFrame&&CurrentIFrame.remove(),t?.Theme){if(WaitForClass("content").then(function(i){i.style.padding="20px",i.style.borderRadius="10px",(e.includes("/home")||e.match("/games/[0-9]+/")&&e.match("/games/[0-9]+/").length!=0)&&(document.getElementById("HomeContainer")?.classList?.contains("expand-max-width")||(i.style.maxWidth="1000px",i.classList.add("custom-theme-centered")))}),e.includes("/users/")&&WaitForClass("profile-ads-container").then(function(i){if(!i.parentElement)return;const s=FindFirstClass("content");s.parentElement.insertBefore(i,s.nextSibling),i.style.marginTop="20px"}),e.match("/groups/[0-9]+/")){const i=document.createElement("style");i.innerHTML="@media (min-width: 1850px) { .content {max-width: 1335px !important;} }",document.head.appendChild(i),StyleFixes.push(i)}WaitForId("Leaderboard-Abp").then(function(i){if(!i.parentElement)return;const s=FindFirstClass("content");s.parentElement.insertBefore(i,s),i.style.marginBottom="20px"});const o=await WaitForId("container-main"),n=document.createElement("iframe");n.style=DefaultIFrameStyle,t.Theme!="custom"?n.src=`${WebServerEndpoints.ThemesV2}theme?theme=${t.Theme}`:n.src=t.Access||"",CurrentIFrame=n,UpdateThemeSettings(t),o.style="border-radius: 20px; padding: 20px;",o.appendChild(n)}else{WaitForClass("content").then(function(n){n.style.padding="",n.style.borderRadius="",(e.includes("/home")||e.match("/games/[0-9]+/")&&e.match("/games/[0-9]+/").length!=0)&&(document.getElementById("HomeContainer")?.classList?.contains("expand-max-width")||(n.style.maxWidth="",n.classList.remove("custom-theme-centered")))});const o=await WaitForId("container-main");o.style.padding="",o.style.borderRadius="";for(let n=0;n<StyleFixes.length;n++)StyleFixes[n].remove();StyleFixes.length=0}}IsFeatureEnabled("CurrentTheme").then(async function(t){t?.Theme&&UpdateTheme(t)}),ListenToEventFromBackground("ThemeChange",function(t){UpdateTheme(t.Theme)}),ListenToEventFromBackground("ThemeSettingsChange",function(t){UpdateThemeSettings(t.Theme)});

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/theme/customtheme.js