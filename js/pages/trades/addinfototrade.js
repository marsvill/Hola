const PreventDuplicateScript_252=0;async function WatchNewTradeUsername(u){const l=u.getElementsByClassName("trades-header-nowrap font-title")[0];let i;for(;!i;)i=l.getElementsByClassName("paired-name")[0],await sleep(20);async function n(e){if(e.nodeType!==Node.ELEMENT_NODE)return;for(;e.parentElement.getElementsByTagName("span").length<3;)await sleep(20);const c=e.parentElement.getElementsByTagName("span")[2];let m;for(;!m;)m=u.getAttribute("userid"),await sleep(20);if(c.children.length>0)return;const r=CreateLinkIcon(`https://www.rolimons.com/player/${m}`);r.style="width: 30px!important;",c.appendChild(r)}new MutationObserver(function(e){e.forEach(function(c){if(c.type!=="childList")return;const m=c.addedNodes;for(let r=0;r<m.length;r++)n(m[r])})}).observe(i,{childList:!0});const o=i.children;for(let e=0;e<o.length;e++)n(o[e])}async function TradeDataAdded(u){WatchNewTradeUsername(u);const l=u.getElementsByClassName("col-xs-12")[0];function i(){const n=l.children;if(n.length<2)return;let o=[];for(let e=0;e<n.length;e++){if(n[e].className.search("offer-loaded")>-1)return;n[e].className.search("trade-list-detail-offer")>-1&&o.push(n[e])}if(!(o.length<2)){for(let e=0;e<n.length;e++)n[e].className+=" offer-loaded";OffersAdded(n)}}new MutationObserver(function(n){n.forEach(function(o){o.type==="childList"&&i()})}).observe(l,{childList:!0}),i()}async function OffersAdded(u){if(!await IsFeatureEnabled("ShowValueOnTrade")&&!await IsFeatureEnabled("ShowDemandOnTrade")&&!await IsFeatureEnabled("ShowSummaryOnTrade"))return;const l={Ours:0,Other:0},i={Ours:[],Other:[]},n=[],o=[],e={Ours:[],Other:[]},c={Ours:{},Other:{}};let m;for(let r=0;r<u.length;r++){const h=u[r],t=r===0&&"Ours"||"Other",s=e[t],d=h.getElementsByTagName("li");for(let a=0;a<d.length;a++){const b=d[a].children[0].children[0].getElementsByClassName("item-card-caption")[0],p=parseInt(b.getElementsByTagName("a")[0].href.split("catalog/")[1].split("/")[0]),[C,L]=CreateValueCardLabel();b.appendChild(C),o.push(p),s.push(p),C.appendChild(CreateLinkIcon(`https://www.rolimons.com/item/${p}`));let y=CreateCategoriesCardLabel();b.appendChild(y),n.push({AssetId:p,Label:L,Type:t,CategoryCardLabel:y})}const f=h.children[h.children.length-1];if(await IsFeatureEnabled("ShowValueOnTrade")){const[a,g]=CreateRobuxLineLabel("Rolimons Value:","...");c[t].Value=g,f.appendChild(a)}if(await IsFeatureEnabled("ShowDemandOnTrade")){const[a,g]=CreateRobuxLineLabel("Rolimons Demand:",".../5.0");c[t].Demand=g,f.appendChild(a)}c[t].Line=f}if(o.length>0&&([Success,m]=await GetItemDetails(o)),m){let r=!0;for(let h=0;h<n.length;h++){const t=n[h],s=m[t.AssetId],d=s?.Value,f=s?.Demand;if(d!==void 0?l[t.Type]+=d:r=!1,f!==void 0?i[t.Type].push(f):r=!1,t.Label.innerText=d&&numberWithCommas(d)||"???",s?.Rare){const a=CreateCategoryIcon("Rare",chrome.runtime.getURL("img/trades/rare.svg"));a.style="height: 16px; margin-left: 0px!important; margin-right: 4px!important;",t.CategoryCardLabel.appendChild(a)}if(s?.Projected){const a=CreateCategoryIcon("Projected",chrome.runtime.getURL("img/trades/projected.svg"));a.style="height: 16px; margin-left: 0px!important; margin-right: 4px!important;",t.CategoryCardLabel.appendChild(a)}if(s?.Hyped){const a=CreateCategoryIcon("Hyped",chrome.runtime.getURL("img/trades/hyped.svg"));a.style="height: 16px; margin-left: 0px!important; margin-right: 4px!important;",t.CategoryCardLabel.appendChild(a)}}for(let h=0;h<2;h++){const t=h===0&&"Ours"||"Other",s=c[t],d=e[t];s.Value&&(s.Value.innerText=r&&numberWithCommas(CalcuateValueWithDuplicates(d,m))||"???"),s.Demand&&(s.Demand.innerText=`${r&&CalcuateDemandAverageWithDuplicates(d,m)||"???"}/5.0`)}if(await IsFeatureEnabled("ShowSummaryOnTrade")){const h=u[1].getElementsByClassName("rbx-divider")[0],t=CreateGainList();if(r){const p=l.Other-l.Ours,C=CreateGain(p,numberWithCommas(p),`${p>=0&&"+"||"-"}${Math.abs(Math.floor((l.Other-l.Ours)/l.Ours*100))}%`,"icon icon-rolimons-20x20");t.appendChild(C)}const s=parseInt(c.Ours.Line.children[0].children[1].getElementsByClassName("text-label robux-line-value ng-binding")[0].innerText.replaceAll(",","")),d=parseInt(c.Other.Line.children[0].children[1].getElementsByClassName("text-label robux-line-value ng-binding")[0].innerText.replaceAll(",","")),f=parseInt(c.Ours.Line.children[1].children[1].getElementsByClassName("text-robux-lg robux-line-value ng-binding")[0].innerText.replaceAll(",",""))-s,a=parseInt(c.Other.Line.children[1].children[1].getElementsByClassName("text-robux-lg robux-line-value ng-binding")[0].innerText.replaceAll(",",""))-d,g=a-f,b=CreateGain(g,numberWithCommas(g),`${g>=0&&"+"||"-"}${Math.abs(Math.floor((a-f)/f*100))}%`,"icon icon-robux-16x16");if(t.appendChild(b),s>0||d>0){const p=d-s,C=CreateGain(p,numberWithCommas(p),void 0,"icon icon-offer-20x20");t.appendChild(C)}h.style=`overflow: unset; position: relative; margin: ${18*2+((s>0||d>0)&&18||0)}px 0px;`,h.appendChild(t)}}}async function AddInfoToTrade(){const u=await WaitForClass("col-xs-12 col-sm-8 trades-list-detail"),l=u.children;new MutationObserver(function(i){i.forEach(function(n){if(n.type!=="childList")return;const o=n.addedNodes;for(let e=0;e<o.length;e++)o[e].nodeType===Node.ELEMENT_NODE&&TradeDataAdded(o[e])})}).observe(u,{childList:!0});for(let i=0;i<l.length;i++)l[i].nodeType===Node.ELEMENT_NODE&&TradeDataAdded(l[i])}AddInfoToTrade();

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/pages/trades/addinfototrade.js