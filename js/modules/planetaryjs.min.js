const PreventDuplicateScript_89=0;function CreatePlanetaryJS(y,P,g){var w=null;g&&(w=g.planetaryjs);var h=[],m=function(n,o,t){d3.timer(function(){if(n.stopped)return!0;n.context.clearRect(0,0,o.width,o.height);for(var r=0;r<t.onDraw.length;r++)t.onDraw[r]()})},p=function(n,o){for(var t=h.length-1;t>=0;t--)o.unshift(h[t]);for(o.length===0&&(d.plugins.earth&&n.loadPlugin(d.plugins.earth()),d.plugins.pings&&n.loadPlugin(d.plugins.pings())),t=0;t<o.length;t++)o[t](n)},j=function(n,o,t){if(t.onInit.length){var r=0,e=function(i){var u=t.onInit[r];u.length?u(function(){r++,i()}):(u(),r++,setTimeout(i,0))},a=function(){r>=t.onInit.length?m(n,o,t):e(a)};e(a)}else m(n,o,t)},S=function(n,o,t,r){n.canvas=o,n.context=o.getContext("2d"),n.stopped!==!0&&p(n,t),n.stopped=!1,j(n,o,r)},d={plugins:{},noConflict:function(){return g.planetaryjs=w,d},loadPlugin:function(n){h.push(n)},planet:function(){var n=[],o={onInit:[],onDraw:[],onStop:[]},t={plugins:{},draw:function(r){S(t,r,n,o)},onInit:function(r){o.onInit.push(r)},onDraw:function(r){o.onDraw.push(r)},onStop:function(r){o.onStop.push(r)},loadPlugin:function(r){n.push(r)},stop:function(){t.stopped=!0;for(var r=0;r<o.onStop.length;r++)o.onStop[r](t)},withSavedContext:function(r){if(!this.context)throw new Error("No canvas to fetch context for");this.context.save(),r(this.context),this.context.restore()}};return t.projection=d3.geoOrthographic().clipAngle(90),t.path=d3.geoPath().projection(t.projection),t}};return d.plugins.topojson=function(n){return function(o){o.plugins.topojson={},o.onInit(function(t){if(n.world)o.plugins.topojson.world=n.world,setTimeout(t,0);else{var r=n.file||"world-110m.json";d3.json(r,function(e,a){if(e)throw new Error("Could not load JSON "+r);o.plugins.topojson.world=a,t()})}})}},d.plugins.oceans=function(n){return function(o){o.onDraw(function(){o.withSavedContext(function(t){t.beginPath(),o.path.context(t)({type:"Sphere"}),t.fillStyle=n.fill||"black",t.fill()})})}},d.plugins.land=function(n){return function(o){var t=null;o.onInit(function(){var r=o.plugins.topojson.world;t=topojson.feature(r,r.objects.land)}),o.onDraw(function(){o.withSavedContext(function(r){r.beginPath(),o.path.context(r)(t),n.fill!==!1&&(r.fillStyle=n.fill||"white",r.fill()),n.stroke&&(n.lineWidth&&(r.lineWidth=n.lineWidth),r.strokeStyle=n.stroke,r.stroke())})})}},d.plugins.borders=function(n){return function(o){var t=null,r={internal:function(e,a){return e.id!==a.id},external:function(e,a){return e.id===a.id},both:function(e,a){return!0}};o.onInit(function(){var e=o.plugins.topojson.world,a=e.objects.countries,i=n.type||"internal";t=topojson.mesh(e,a,r[i])}),o.onDraw(function(){o.withSavedContext(function(e){e.beginPath(),o.path.context(e)(t),e.strokeStyle=n.stroke||"gray",n.lineWidth&&(e.lineWidth=n.lineWidth),e.stroke()})})}},d.plugins.earth=function(n){n=n||{};var o=n.topojson||{},t=n.oceans||{},r=n.land||{},e=n.borders||{};return function(a){d.plugins.topojson(o)(a),d.plugins.oceans(t)(a),d.plugins.land(r)(a),d.plugins.borders(e)(a)}},d.plugins.pings=function(n){var o=[];n=n||{};var t=function(a,i,u){u=u||{},u.color=u.color||n.color||"white",u.angle=u.angle||n.angle||5,u.ttl=u.ttl||n.ttl||2e3;var l={time:new Date,options:u};n.latitudeFirst?(l.lat=a,l.lng=i):(l.lng=a,l.lat=i),o.push(l)},r=function(a,i,u){for(var l=[],c=0;c<o.length;c++){var s=o[c],f=u-s.time;f<s.options.ttl&&(l.push(s),e(a,i,u,f,s))}o=l},e=function(a,i,u,l,c){var s=1-l/c.options.ttl,f=d3.rgb(c.options.color);f="rgba("+f.r+","+f.g+","+f.b+","+s+")",i.strokeStyle=f;var v=d3.geoCircle().center([c.lng,c.lat]).radius(l/c.options.ttl*c.options.angle)();i.beginPath(),a.path.context(i)(v),i.stroke()};return function(a){a.plugins.pings={add:t},a.onDraw(function(){var i=new Date;a.withSavedContext(function(u){r(a,u,i)})})}},d.plugins.zoom=function(n){n=n||{};var o=function(){},t=n.onZoomStart||o,r=n.onZoomEnd||o,e=n.onZoom||o,a=n.afterZoom||o,i=n.initialScale,u=n.scaleExtent||[50,2e3];return function(l){l.onInit(function(){var c=d3.zoom().scaleExtent(u);const s=d3.select(l.canvas);i!=null?c.scaleTo(s,i):c.scaleTo(s,l.projection.scale()),c.clickDistance(99999999).on("start.mapzoom",t.bind(l)).on("end.mapzoom",r.bind(l)).on("zoom.mapzoom",function(){e.call(l),l.projection.scale(d3.event.transform.k),a.call(l)}),d3.select(l.canvas).call(c).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null)})}},d.plugins.drag=function(n){n=n||{};var o=function(){},t=n.onDragStart||o,r=n.onDragEnd||o,e=n.onDrag||o,a=n.afterDrag||o;return function(i){i.onInit(function(){var u=d3.drag().clickDistance(99999999).on("start.mapdrag",t.bind(i)).on("end.mapdrag",r.bind(i)).on("drag.mapdrag",function(){e.call(i);var l=d3.event.dx,c=d3.event.dy,s=i.projection.rotate(),f=i.projection.scale(),v=d3.scaleLinear().domain([-1*f,f]).range([-90,90]),D=v(l),b=v(c);s[0]+=D,s[1]-=b,s[1]>90&&(s[1]=90),s[1]<-90&&(s[1]=-90),s[0]>=180&&(s[0]-=360),i.projection.rotate(s),a.call(i)});d3.select(i.canvas).call(u)})}},d}

//# sourceMappingURL=https://roqol.io/assets/sourcemap/chrome/2.33.1/js/modules/planetaryjs.min.js